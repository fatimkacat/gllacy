function nextSlide(){currentSlide==toggles.length-1?currentSlide=0:currentSlide++,toggles[currentSlide].checked=!0}function open(){popup.classList.add("reply_popup"),overlay.classList.add("overlay_popup")}function close_popup(){popup.classList.remove("reply_popup"),overlay.classList.remove("overlay_popup"),popup.classList.remove("error_popup")}var toggles=document.querySelectorAll("body > [name=toggle]"),currentSlide=0,SLIDE_DURATION=1e4,slideInterval=setInterval(nextSlide,SLIDE_DURATION),link=document.querySelector(".reply_popup"),popup=document.querySelector(".reply"),overlay=document.querySelector(".modal_overlay"),close=popup.querySelector(".close"),popup_name=popup.querySelector("[name=name]"),popup_email=popup.querySelector("[name=email]"),popup_message=popup.querySelector("[name=message]"),storage_name="";try{storage_name=localStorage.getItem("popup_name")}catch(e){}var storage_email="";try{storage_email=localStorage.getItem("popup_email")}catch(e){}for(var currentSlide=0,indexOfChecked=0,j=0;j<toggles.length;j++)toggles[j].addEventListener("click",function(){for(var e=0;e<toggles.length;e++)toggles[e].checked&&(indexOfChecked=e);currentSlide=indexOfChecked,clearInterval(slideInterval),slideInterval=setInterval(nextSlide,4e3)});link.addEventListener("click",function(e){e.preventDefault(),open(),popup_name.value?popup_email.value?popup_message.focus():popup_email.focus():popup_name.focus()}),popup.addEventListener("submit",function(e){if(popup_name.value&&popup_email.value&&popup_message.value)try{localStorage.setItem("popup_name",popup_name.value),localStorage.setItem("popup_email",popup_email.value)}catch(p){}else e.preventDefault(),popup.classList.remove("error_popup"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("error_popup"),popup_email.classList.remove("error_color"),popup_message.classList.remove("error_color"),popup_name.classList.remove("error_color"),popup_name.value?popup_email.focus():popup_name.classList.add("error_color"),popup_email.value?popup_message.focus():popup_email.classList.add("error_color"),popup_message.value||popup_message.classList.add("error_color")}),window.addEventListener("keydown",function(e){27===e.keyCode&&close_popup()}),overlay.addEventListener("click",function(){close_popup()}),close.addEventListener("click",function(){close_popup()});
